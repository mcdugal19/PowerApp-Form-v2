HomeScreen As screen:
    Fill: =ColorGray50
    Size: =If(App.Width < 600, ScreenSize.Small, If(App.Width < 900, ScreenSize.Medium, ScreenSize.Large))
    Orientation: =If(App.Width > App.Height, Layout.Horizontal, Layout.Vertical)
    LoadingSpinner: =LoadingSpinner.None
    AccessibleLabel: ="Field Technician Forms Home Screen"
    OnVisible: |
        =// Initialize search and filter
        Set(varSearchText, "");
        Set(varFilterCategory, "All");
        Set(varSelectedFormTemplate, Blank())
    
    # ========================================
    # HEADER SECTION
    # ========================================
    
    HeaderGradient As rectangle:
        Height: =If(App.Width < 600, 100, If(App.Width < 900, 120, 140))
        Width: =Parent.Width
        X: =0
        Y: =0
        Fill: =ColorPrimary
    
    AppIcon As icon.CheckBadge:
        Icon: =Icon.CheckBadge
        Height: =48
        Width: =48
        X: =16
        Y: =If(App.Width < 600, 16, 24)
        Color: =ColorWhite
        AccessibleLabel: ="Field Technician Forms Application"
        TabIndex: =-1
    
    HeaderLabel As label:
        Height: =If(App.Width < 600, 32, 40)
        Text: ="Field Technician Forms"
        Width: =Parent.Width - AppIcon.Width - 64
        X: =AppIcon.X + AppIcon.Width + 16
        Y: =If(App.Width < 600, 16, 24)
        Align: =Align.Left
        FontWeight: =FontWeight.Bold
        Size: =If(App.Width < 600, 20, If(App.Width < 900, 24, 28))
        Color: =ColorWhite
        AccessibleLabel: ="Field Technician Forms - Application Title"
    
    HeaderSubtitle As label:
        Height: =If(App.Width < 600, 20, 24)
        Text: ="Select a form to complete"
        Width: =HeaderLabel.Width
        X: =HeaderLabel.X
        Y: =HeaderLabel.Y + HeaderLabel.Height + 8
        Align: =Align.Left
        Size: =If(App.Width < 600, 14, If(App.Width < 900, 14, 16))
        Color: =RGBA(255, 255, 255, 0.9)
        AccessibleLabel: ="Select a form to complete"
    
    # ========================================
    # SEARCH BAR
    # ========================================
    
    SearchContainer As rectangle:
        Height: =48
        Width: =Min(Parent.Width - If(App.Width < 600, 32, 48), 900)
        X: =(Parent.Width - Self.Width) / 2
        Y: =HeaderGradient.Height + 16
        Fill: =ColorWhite
        BorderColor: =ColorBorderDefault
        BorderThickness: =1
        RadiusTopLeft: =8
        RadiusTopRight: =8
        RadiusBottomLeft: =8
        RadiusBottomRight: =8
    
    SearchIcon As icon.Search:
        Icon: =Icon.Search
        Height: =24
        Width: =24
        X: =SearchContainer.X + 16
        Y: =SearchContainer.Y + (SearchContainer.Height - Self.Height) / 2
        Color: =ColorTextSecondary
        AccessibleLabel: ="Search icon"
        TabIndex: =-1
    
    SearchInput As text:
        Height: =SearchContainer.Height - 8
        Width: =SearchContainer.Width - SearchIcon.Width - ClearSearchIcon.Width - 64
        X: =SearchIcon.X + SearchIcon.Width + 8
        Y: =SearchContainer.Y + 4
        HintText: ="Search forms by name or number..."
        Mode: =TextMode.SingleLine
        BorderThickness: =0
        Default: =varSearchText
        OnChange: =Set(varSearchText, Self.Text)
        Size: =16
        PaddingLeft: =8
        Color: =ColorTextPrimary
        AccessibleLabel: ="Search forms by name or number"
        TabIndex: =1
    
    ClearSearchIcon As icon.Cancel:
        Icon: =Icon.Cancel
        Height: =24
        Width: =24
        X: =SearchContainer.X + SearchContainer.Width - Self.Width - 16
        Y: =SearchContainer.Y + (SearchContainer.Height - Self.Height) / 2
        Color: =If(!IsBlank(SearchInput.Text), ColorTextSecondary, ColorGray300)
        Visible: =!IsBlank(SearchInput.Text)
        OnSelect: =Set(varSearchText, ""); Reset(SearchInput)
        AccessibleLabel: ="Clear search"
        TabIndex: =2
    
    # ========================================
    # FILTER CHIPS
    # ========================================
    
    FilterChipsContainer As rectangle:
        Height: =48
        Width: =SearchContainer.Width
        X: =SearchContainer.X
        Y: =SearchContainer.Y + SearchContainer.Height + 16
        Fill: =RGBA(255, 255, 255, 0)
        BorderThickness: =0
    
    ChipAll As button:
        Height: =48
        Width: =If(App.Width < 600, 72, 88)
        X: =FilterChipsContainer.X
        Y: =FilterChipsContainer.Y
        Text: ="All"
        Fill: =If(varFilterCategory = "All", ColorPrimary, ColorWhite)
        HoverFill: =If(varFilterCategory = "All", ColorPrimaryDark, ColorPrimaryLight)
        PressedFill: =If(varFilterCategory = "All", ColorPrimaryDark, ColorGray200)
        Color: =If(varFilterCategory = "All", ColorWhite, ColorPrimary)
        BorderColor: =ColorPrimary
        BorderThickness: =2
        FontSize: =14
        RadiusTopLeft: =24
        RadiusTopRight: =24
        RadiusBottomLeft: =24
        RadiusBottomRight: =24
        OnSelect: =Set(varFilterCategory, "All")
        AccessibleLabel: ="Filter: Show all forms"
        TabIndex: =3
    
    ChipSafety As button:
        Height: =48
        Width: =If(App.Width < 600, 88, 96)
        X: =ChipAll.X + ChipAll.Width + 8
        Y: =ChipAll.Y
        Text: ="Safety"
        Fill: =If(varFilterCategory = "Safety", ColorPrimary, ColorWhite)
        HoverFill: =If(varFilterCategory = "Safety", ColorPrimaryDark, ColorPrimaryLight)
        PressedFill: =If(varFilterCategory = "Safety", ColorPrimaryDark, ColorGray200)
        Color: =If(varFilterCategory = "Safety", ColorWhite, ColorPrimary)
        BorderColor: =ColorPrimary
        BorderThickness: =2
        FontSize: =14
        RadiusTopLeft: =24
        RadiusTopRight: =24
        RadiusBottomLeft: =24
        RadiusBottomRight: =24
        OnSelect: =Set(varFilterCategory, "Safety")
        AccessibleLabel: ="Filter: Show safety forms only"
        TabIndex: =4
    
    ChipMaintenance As button:
        Height: =48
        Width: =If(App.Width < 600, 128, 144)
        X: =ChipSafety.X + ChipSafety.Width + 8
        Y: =ChipAll.Y
        Text: ="Maintenance"
        Fill: =If(varFilterCategory = "Maintenance", ColorPrimary, ColorWhite)
        HoverFill: =If(varFilterCategory = "Maintenance", ColorPrimaryDark, ColorPrimaryLight)
        PressedFill: =If(varFilterCategory = "Maintenance", ColorPrimaryDark, ColorGray200)
        Color: =If(varFilterCategory = "Maintenance", ColorWhite, ColorPrimary)
        BorderColor: =ColorPrimary
        BorderThickness: =2
        FontSize: =14
        RadiusTopLeft: =24
        RadiusTopRight: =24
        RadiusBottomLeft: =24
        RadiusBottomRight: =24
        OnSelect: =Set(varFilterCategory, "Maintenance")
        Visible: =App.Width >= 600
        AccessibleLabel: ="Filter: Show maintenance forms only"
        TabIndex: =5
    
    ChipQuality As button:
        Height: =48
        Width: =If(App.Width < 600, 88, 96)
        X: =If(App.Width >= 600, ChipMaintenance.X + ChipMaintenance.Width + 8, ChipSafety.X + ChipSafety.Width + 8)
        Y: =ChipAll.Y
        Text: ="Quality"
        Fill: =If(varFilterCategory = "Quality", ColorPrimary, ColorWhite)
        HoverFill: =If(varFilterCategory = "Quality", ColorPrimaryDark, ColorPrimaryLight)
        PressedFill: =If(varFilterCategory = "Quality", ColorPrimaryDark, ColorGray200)
        Color: =If(varFilterCategory = "Quality", ColorWhite, ColorPrimary)
        BorderColor: =ColorPrimary
        BorderThickness: =2
        FontSize: =14
        RadiusTopLeft: =24
        RadiusTopRight: =24
        RadiusBottomLeft: =24
        RadiusBottomRight: =24
        OnSelect: =Set(varFilterCategory, "Quality")
        AccessibleLabel: ="Filter: Show quality forms only"
        TabIndex: =6
    
    # ========================================
    # FORMS GALLERY
    # ========================================
    
    FormsGallery As gallery.galleryVertical:
        Height: =Parent.Height - FilterChipsContainer.Y - FilterChipsContainer.Height - 80
        Width: =SearchContainer.Width
        X: =SearchContainer.X
        Y: =FilterChipsContainer.Y + FilterChipsContainer.Height + 16
        TemplatePadding: =8
        TemplateSize: =If(App.Width < 600, 120, 136)
        AccessibleLabel: ="Available forms list"
        TabIndex: =7
        Items: |
            =// Mock data for now - will connect to Dataverse later
            Table(
                {
                    FormName: "Daily Safety Inspection",
                    FormNumber: "SF-001",
                    Description: "Required daily safety checklist for all field technicians",
                    Category: "Safety",
                    IconName: "Shield",
                    IconColor: "#107C10",
                    EstimatedTime: 15,
                    IsRequired: true
                },
                {
                    FormName: "Equipment Maintenance Check",
                    FormNumber: "MF-001",
                    Description: "Regular maintenance inspection for field equipment",
                    Category: "Maintenance",
                    IconName: "Wrench",
                    IconColor: "#0078D4",
                    EstimatedTime: 20,
                    IsRequired: false
                },
                {
                    FormName: "Incident Report",
                    FormNumber: "IR-001",
                    Description: "Report any safety incidents or near-misses",
                    Category: "Safety",
                    IconName: "Warning",
                    IconColor: "#D13438",
                    EstimatedTime: 10,
                    IsRequired: false
                },
                {
                    FormName: "Quality Control Inspection",
                    FormNumber: "QC-001",
                    Description: "Quality assurance checklist for completed work",
                    Category: "Quality",
                    IconName: "Checkmark",
                    IconColor: "#107C10",
                    EstimatedTime: 12,
                    IsRequired: true
                },
                {
                    FormName: "Pre-Operational Checklist",
                    FormNumber: "PC-001",
                    Description: "Verify equipment is ready before starting work",
                    Category: "Safety",
                    IconName: "CircleRing",
                    IconColor: "#FFA500",
                    EstimatedTime: 8,
                    IsRequired: true
                }
            )
        
        FormCard As rectangle:
            Height: =Parent.TemplateHeight - 16
            Width: =Parent.TemplateWidth - 16
            X: =8
            Y: =8
            Fill: =ColorWhite
            BorderColor: =If(Self.Pressed, ColorBorderFocus, ColorBorderDefault)
            BorderThickness: =If(Self.Pressed, 2, 1)
            RadiusTopLeft: =8
            RadiusTopRight: =8
            RadiusBottomLeft: =8
            RadiusBottomRight: =8
            AccessibleLabel: =ThisItem.FormName & ", " & ThisItem.FormNumber & ". " & ThisItem.Description & ". Estimated time: " & ThisItem.EstimatedTime & " minutes"
            OnSelect: |
                =Set(varSelectedFormTemplate, ThisItem);
                // Navigate based on form type
                Switch(
                    ThisItem.FormNumber,
                    "SF-001", Navigate(Screen1, ScreenTransition.Fade),
                    Notify("Form screen not yet created: " & ThisItem.FormName, NotificationType.Information)
                )
        
        FormIconCircle As circle:
            Height: =56
            Width: =56
            X: =FormCard.X + 16
            Y: =FormCard.Y + (FormCard.Height - Self.Height) / 2
            Fill: =ColorValue(ThisItem.IconColor & "20")
            BorderColor: =ColorValue(ThisItem.IconColor)
            BorderThickness: =2
        
        FormIcon As icon.Shield:
            Icon: =Switch(
                ThisItem.IconName,
                "Shield", Icon.Shield,
                "Wrench", Icon.Wrench,
                "Warning", Icon.Warning,
                "Checkmark", Icon.Checkmark,
                "CircleRing", Icon.CircleRing,
                Icon.Document
            )
            Height: =32
            Width: =32
            X: =FormIconCircle.X + (FormIconCircle.Width - Self.Width) / 2
            Y: =FormIconCircle.Y + (FormIconCircle.Height - Self.Height) / 2
            Color: =ColorValue(ThisItem.IconColor)
            AccessibleLabel: =ThisItem.IconName & " icon"
            TabIndex: =-1
        
        FormNameLabel As label:
            Height: =If(App.Width < 600, 40, 40)
            Text: =ThisItem.FormName
            Width: =FormCard.Width - FormIconCircle.Width - ArrowIcon.Width - 56
            X: =FormIconCircle.X + FormIconCircle.Width + 16
            Y: =FormCard.Y + 16
            Size: =16
            FontWeight: =FontWeight.Semibold
            Color: =ColorTextPrimary
        
        FormNumberLabel As label:
            Height: =20
            Text: =ThisItem.FormNumber
            Width: =FormNameLabel.Width
            X: =FormNameLabel.X
            Y: =FormNameLabel.Y + FormNameLabel.Height + 4
            Size: =12
            Color: =ColorTextSecondary
        
        FormDescLabel As label:
            Height: =If(App.Width < 600, 32, 32)
            Text: =ThisItem.Description
            Width: =FormNameLabel.Width
            X: =FormNameLabel.X
            Y: =FormNumberLabel.Y + FormNumberLabel.Height + 8
            Size: =14
            Color: =ColorTextSecondary
        
        TimeLabel As label:
            Height: =20
            Text: =ThisItem.EstimatedTime & " min"
            Width: =72
            X: =FormCard.X + FormCard.Width - Self.Width - ArrowIcon.Width - 24
            Y: =FormCard.Y + FormCard.Height - Self.Height - 16
            Size: =12
            Align: =Align.Right
            Color: =ColorTextSecondary
            FontWeight: =FontWeight.Semibold
        
        RequiredBadge As label:
            Height: =24
            Text: ="REQUIRED"
            Width: =88
            X: =FormNameLabel.X
            Y: =FormCard.Y + FormCard.Height - Self.Height - 16
            Size: =10
            Align: =Align.Center
            FontWeight: =FontWeight.Bold
            Color: =ColorDanger
            Visible: =ThisItem.IsRequired
        
        ArrowIcon As icon.ChevronRight:
            Icon: =Icon.ChevronRight
            Height: =24
            Width: =24
            X: =FormCard.X + FormCard.Width - Self.Width - 16
            Y: =FormCard.Y + (FormCard.Height - Self.Height) / 2
            Color: =ColorPrimary
            AccessibleLabel: ="Navigate to form"
            TabIndex: =-1
    
    # ========================================
    # FOOTER
    # ========================================
    
    FooterLabel As label:
        Height: =32
        Text: ="Â© 2024 Field Technician Forms System"
        Width: =Parent.Width
        X: =0
        Y: =Parent.Height - 40
        Align: =Align.Center
        Size: =12
        Color: =ColorTextSecondary
        AccessibleLabel: ="Copyright 2024 Field Technician Forms System"
